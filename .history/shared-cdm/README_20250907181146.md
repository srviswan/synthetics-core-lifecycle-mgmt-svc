# Shared CDM Module

This module contains the Common Data Model (CDM) classes and shared services for the Swap Life Cycle Management Service.

## Components

### Domain Objects
- **Party**: Counterparty information
- **Underlier**: Underlying asset information
- **Trade**: Swap trade information
- **Position**: Position within a trade
- **Lot**: Individual lot within a position
- **Cashflow**: Generated cashflow information

### Events
- **LifecycleEvent**: Base class for all lifecycle events
- **NewTradeEvent**: New trade creation event
- **AmendmentEvent**: Trade amendment event
- **PartialUnwindEvent**: Partial unwind event
- **TerminationEvent**: Trade termination event
- **FixingPublishedEvent**: Market data fixing event

### Messaging
- **EventPublisher**: Interface for publishing events
- **EventConsumer**: Interface for consuming events
- **EventHandler**: Functional interface for event handling
- **EventProcessingException**: Exception for event processing errors

### Services
- **ReferenceDataService**: Interface for reference data access
- **MockReferenceDataService**: Mock implementation for development
- **RealReferenceDataService**: Real implementation (placeholder)

## Reference Data Service

The reference data service provides access to market data, calendars, and party information.

### Configuration

```yaml
reference-data:
  service:
    type: mock  # Options: mock, real
  mock:
    enabled: true
  real:
    enabled: false
```

### Usage

```java
@Autowired
private ReferenceDataService referenceDataService;

// Get interest rate curve
CompletableFuture<InterestRateCurve> curve = 
    referenceDataService.getInterestRateCurve("USD-LIBOR", LocalDate.now());

// Get fixing value
CompletableFuture<Fixing> fixing = 
    referenceDataService.getFixing("LIBOR-USD-3M", LocalDate.now());

// Get business calendar
CompletableFuture<Calendar> calendar = 
    referenceDataService.getBusinessCalendar("USD");

// Get party information
CompletableFuture<Party> party = 
    referenceDataService.getParty("BANK001");
```

### Mock Implementation

The mock implementation provides:
- **Interest Rate Curves**: Predefined rates for different tenors
- **Fixings**: Random values based on index type
- **Business Calendar**: Monday-Friday with common holidays
- **Parties**: Predefined party information

### Real Implementation

The real implementation is a placeholder that can be extended to integrate with actual reference data systems.

## Dependencies

- Spring Boot Starter
- Jackson for JSON serialization
- Validation API
- Lombok for code generation
- Spring Boot Configuration Processor

## Usage in Services

To use the shared CDM in other services:

1. Add dependency to `shared-cdm`
2. Import the required classes
3. Configure the reference data service
4. Use the domain objects and services

Example:

```xml
<dependency>
    <groupId>com.synthetics.core</groupId>
    <artifactId>shared-cdm</artifactId>
    <version>${project.version}</version>
</dependency>
```
